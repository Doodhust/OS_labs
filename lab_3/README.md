# Лабораторная работа №3: Многопоточная программа с логгированием и дочерними процессами

## Описание

Эта программа представляет собой многопоточное приложение на C++, которое:

- Логгирует свои действия в файл `log.txt`.
- Увеличивает счетчик каждые 300 мс.
- Позволяет пользователю изменять значение счетчика через командную строку.
- Запускает дочерние процессы каждые 3 секунды, которые изменяют значение счетчика.
- Поддерживает несколько экземпляров программы, синхронизируя доступ к счетчику.

Программа работает на POSIX-совместимых системах (Linux, macOS) и Windows (с использованием MinGW или MSYS2).

---

## Требования

- Компилятор `g++` с поддержкой C++11.
- POSIX-совместимая система или Windows с MinGW/MSYS2.

---

## Сборка и запуск

### 1. Клонируйте репозиторий (если есть) или скопируйте файлы:
git clone <ваш-репозиторий>
cd <ваш-репозиторий>
### 2. Соберите проект:
Для сборки используйте make:

make
Это создаст исполняемый файл program.

### 3. Запустите программу:

./program
Как использовать программу
После запуска программа начнет работать в фоновом режиме. Вы можете взаимодействовать с ней через командную строку.

## Основные команды:

Установить значение счетчика:
Введите set <значение>, чтобы установить значение счетчика. Например:
set 50
Завершить программу:
Введите exit, чтобы завершить программу.

## Логирование

Программа записывает свои действия в файл log.txt. Пример содержимого лог-файла:

2024-05-15 12:00:03.500 PID: 67890 Copy 1 started. Counter increased by 10.
2024-05-15 12:00:03.500 PID: 67891 Copy 2 started. Counter multiplied by 2.
2024-05-15 12:00:05.500 PID: 67891 Counter divided by 2

## Что делает программа

Инициализация:

При запуске программа открывает лог-файл и записывает в него строку с идентификатором процесса (PID) и временем запуска.

Таймер:

Каждые 300 мс программа увеличивает значение счетчика на 1.

## Логирование:

Каждую секунду программа записывает в лог-файл текущее время, идентификатор процесса (PID) и значение счетчика.

## Дочерние процессы:

Каждые 3 секунды программа запускает два дочерних процесса:

Копия 1: Увеличивает счетчик на 10 и завершает работу.

Копия 2: Умножает счетчик на 2, ждет 2 секунды, делит счетчик на 2 и завершает работу.

Если дочерние процессы еще не завершились к моменту следующего запуска, программа запишет в лог сообщение об этом.

## Взаимодействие с пользователем:

Пользователь может изменять значение счетчика через командную строку.

Структура проекта
/project
    ├── main.cpp
    ├── logger.h
    ├── logger.cpp
    ├── counter.h
    ├── counter.cpp
    ├── process_manager.h
    ├── process_manager.cpp
    ├── Makefile
    └── README.md

## Зависимости

### Логгирование: Используется класс Logger для записи логов в файл.

### Счетчик: Используется класс Counter для управления значением счетчика.

### Многопоточность: Используются потоки (std::thread) и мьютексы (std::mutex) для синхронизации.

### Дочерние процессы: Используется fork() для создания дочерних процессов.